---
title: "GitHub Actions の Private リポジトリの料金概算"
date: 2019-10-07
---

__Powered by Omnis Inc. この情報は株式会社オムニスの業務の一環での調査結果です。__

---

Public リポジトリは無料なので、 Private リポジトリについてのざっくりを説明します。
詳しい料金は https://github.co.jp/features/actions の `シンプルな従量課金` にあります。

__あくまで従量課金であるため、以下の計算は目安です。まず無料枠で使用し、単位時間あたりの CI 稼働時間を計算し、より正確な見積もりに役立てましょう。__

## 個人ユーザ
Free: 2000分 ~= 1時間/日
Pro: 3000分 ~= 1時間半/日

CI がずっと出ずっぱりでない用途の場合、1日8時間コードを書く時間があったとして、8分につき1分 CI が動く程度であれば無料枠で収まります。

超過分についての概算については下に記述してあります。

## 企業ユーザ

Team: 10000分 ~= 8時間/日 (20日稼働換算)
Enterprise: 50000分 ~= 40時間/日 (20日稼働換算)

Team の場合、1並列であれば8時間出ずっぱりであっても1ヶ月の稼働に耐えられるので、最低限の用意であれば追加料金は無料で使うことができるといっても差し支えないでしょう。
Enterprise の場合、 GitHub 自体はホスティングであっても、 CI 自体は無料枠があるようで、1日8時間換算の場合5並列まで無料枠で賄える概算です。

8時間出ずっぱりでない場合はその分並列にすることができるので、様子を見て並列にする、ということも可能かと思います。すでに CircleCI の無料プランで十分間に合っている場合などは問題ないかと思います。
CircleCI の無料プラン1並列で8時間出ずっぱりの場合は以下のような超過分を検討すると良いかと思います。

## 超過分料金

Linux の $0.008/m を基準に計算します。
Windows の場合は2倍、MacOS の場合はその箇所だけ10倍になりますが、これらについては動かした上でどの程度使用するか計測してから見積もるのが良いでしょう。

1日8時間20日に1並列増やしたい場合: $0.008 * 60 * 8 * 20 = $76.8 = 8,000円/mo

CircleCI との料金比較は下に記述してあります。

### Runner をセルフホストする場合

セルフホストについての詳細は現在記載されていませんが、 GitLab CI と似た仕組みであれば、 dockerd 入りのインスタンスに agent を入れる形式になるかと思います。
その前提で、インスタンスをホストする場合の料金を計算します。
なお、 Enterprise でセルフホストの場合は、疎通が可能にする必要があります。同一のクラウドベンダにするのが一般的でしょう。

標準 Runner と同様の 2Core 7GB に近いスペックの Linux マシンで計算します。

24/365 立てっぱなしにする場合は細かな運用は不要ですが価格が高くなります。インスタンスを予約することによる割引を受けることも可能ですが、割引前の価格を記載しています。
業務時間のみインスタンスを起動する場合、何かしらの仕組み(chatops / FaaS 等)を用意して運用する必要がありますが、割引前比で約80%のコストカットが可能です。

#### AWS

https://aws.amazon.com/jp/ec2/pricing/on-demand/

m4.xlarge 2Core 8GB $0.129/h

起動し続ける場合: 0.129 * 24 * 30 = $92.88/mo ~= 10,000円/mo
業務時間のみ起動する場合: 0.129 * 8 * 20 = $20.64/mo ~= 2200円/mo

#### GCP

https://cloud.google.com/compute/all-pricing?hl=ja

n1-standard-2 2Core 7.5GB $0.122/h ($62.34/mo)

起動し続ける場合: $62.34 ~= 6,500円/mo
業務時間のみ起動する場合: 0.122 * 8 * 20 = $19.52/mo ~= 2100円/mo

#### Azure

https://azure.microsoft.com/ja-jp/pricing/details/virtual-machines/linux/

B2MS 2Core 8GB 9.3184円/h

起動し続ける場合: 9.3184 * 24 * 30 = 6,710円/mo
業務時間のみ起動する場合: 9.3184 * 8 * 20 = 1,491円/mo

## CircleCI との料金比較

前提として、 CircleCI は従量課金ではなく月額課金となります。
そのため、計算としては GitHub Actions の方が高くなりますが、従量課金であるため、常に CI が稼働していない限りは、計算結果以下の料金になります。
インスタンスは Linux を基準とします。

### CircleCI Cloud

1並列追加ごと
CircleCI: $50/mo ~= 5,000円/mo
GitHub Actions: $0.008 * 60 * 8 * 20 = $76.8 = 8,000円/mo

### CircleCI Enterprise

インスタンス料金はどちらも同様とした場合、ライセンス費のみの違いとなります。
CircleCI Enterprise の場合は $35/1user のライセンス料金が発生します。

## 結論

- 出ずっぱり出ない限り、無料プランで収まる or 追加課金がかかった場合でも CircleCI より安いことが想定される
- セルフホストの場合 CircleCI のライセンス料金分が安くなる(ただし、サポートのプランについては未定)
- __あくまで従量課金であるため、計算は目安です。まず無料枠で使用し、単位時間あたりの CI 稼働時間を計算し、より正確な見積もりに役立てましょう__
